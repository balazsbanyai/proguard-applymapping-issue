task proguard(type: proguard.gradle.ProGuardTask) {
    dependsOn jar

    libraryjars "${System.properties.'java.home'}/lib/rt.jar"
    injars jar.archivePath
    outjars jar.archivePath.getPath().replace(jar.archivePath.getName(), jar.baseName + "-obfuscated.jar")

    printmapping jar.archivePath.getPath().replace(jar.archivePath.getName(), "mapping.txt")

    keep allowobfuscation: true, 'class com.example.** { *; }'
    keep 'class com.example.MyLibrary { *; }'
}